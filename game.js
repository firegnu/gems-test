function ellipsizeText(e,t,a){var o=e.text.length;this.fixLenght=Math.floor(t*o/e.width)-2,this.newText=e.text.substr(0,this.fixLenght)+"...",e.text=this.newText,1===a&&(e.x=game.camera.x+10+e.width/2),3===a&&(e.x=game.camera.x+(game.camera.width-10)-e.width/2)}function JioKaiAds(e){this.adsWrapperId=e}var locale={lang:null,getLocale:navigator.mozL10n.get};!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["phaser-navigator"]=t():e["phaser-navigator"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(a[o])return a[o].exports;var i=a[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="plugin/",t(t.s=0)}([function(e,t,a){a(1),Phaser.Plugin.Navigator=function(e,t){Phaser.Plugin.call(this,e,t)},Phaser.Plugin.Navigator.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Navigator.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Navigator.prototype.stack=[],Phaser.Plugin.Navigator.prototype.init=function(){game.softkey=game.plugins.add(Phaser.Plugin.Softkey)},Phaser.Plugin.Navigator.prototype.register=function(e){this.stack.push(Object.assign({},game.softkey.getLastConfig())),this.group=game.softkey.config({style:e.style,label:e.label}),game.softkey.listener(e.action)},Phaser.Plugin.Navigator.prototype.setLastConfig=function(){var e=this.stack.pop();this.group=game.softkey.config({style:e.style,label:e.label}),game.softkey.listener(e.action)},Phaser.Plugin.Navigator.prototype.stackPopAll=function(){this.stack=[]},Phaser.Plugin.Navigator.prototype.destroy=function(){this.group.kill()}},function(e,t){function a(e,t,a){var o=e.text.length;this.fixLenght=Math.floor(t*o/e.width)-2,this.newText=e.text.substr(0,this.fixLenght)+"...",e.text=this.newText,1===a&&(e.x=game.camera.x+10+e.width/2),3===a&&(e.x=game.camera.x+(game.camera.width-10)-e.width/2)}Phaser.Plugin.Softkey=function(e,t){Phaser.Plugin.call(this,e,t)},Phaser.Plugin.Softkey.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Softkey.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Softkey.prototype.skGroup=null,Phaser.Plugin.Softkey.prototype.lastConfig={},Phaser.Plugin.Softkey.prototype.defaultHandler={},Phaser.Plugin.Softkey.prototype.listener=function(e){self=this,this.lastConfig.action=e,window.onkeydown=function(t){self._keyPress(t,e)}},Phaser.Plugin.Softkey.prototype.config=function(e){if(e.label)return e.style||(e.style={font:"16px Arial",fill:"#ffffff"}),this.skGroup&&this.skGroup.removeAll(),this.skGroup=game.add.group(),this.skGroup.fixedToCamera=!0,this.skGroup.cameraOffset.setTo(-game.camera.x,-game.camera.y),this.lastConfig.label=e.label,this.lastConfig.style=e.style,this.centerX=game.camera.x+game.camera.width/2,this.portionLenght=Math.round(.9*game.camera.width/3),void 0!==e.label.lsk&&(this.lsk=game.add.text(game.camera.x+10,game.camera.y+(game.camera.height-12),e.label.lsk,e.style),this.lsk.x=game.camera.x+10+this.lsk.width/2,this.lsk.anchor.setTo(.5),this.skGroup.add(this.lsk),this.lsk.width>this.portionLenght&&a(this.lsk,this.portionLenght,1)),void 0!==e.label.csk&&(this.csk=game.add.text(this.centerX,game.camera.y+(game.camera.height-12),e.label.csk,e.style),this.csk.anchor.setTo(.5),this.skGroup.add(this.csk),this.csk.width>this.portionLenght&&a(this.csk,this.portionLenght)),void 0!==e.label.rsk&&(this.rsk=game.add.text(190,game.camera.y+(game.camera.height-12),e.label.rsk,e.style),this.rsk.x=game.camera.x+(game.camera.width-10)-this.rsk.width/2,this.rsk.anchor.setTo(.5),this.skGroup.add(this.rsk),this.rsk.width>this.portionLenght&&a(this.rsk,this.portionLenght,3)),this.skGroup},Phaser.Plugin.Softkey.prototype.getLastConfig=function(){return this.lastConfig},Phaser.Plugin.Softkey.prototype._keyPress=function(e,t){var a=null,o=this._debug(e);switch(o){case"SoftLeft":t.softLeft&&(a=t.softLeft);break;case"Enter":t.enter&&(a=t.enter);break;case"SoftRight":t.softRight&&(a=t.softRight);break;case"Backspace":t.backspace&&(a=function(){e.preventDefault(),e.stopImmediatePropagation(),t.backspace()});break;case"EndCall":t.endCall&&(a=function(){e.preventDefault(),e.stopImmediatePropagation(),t.endCall()});break;default:t[o]&&(a=t[o])}a||(a=this.defaultHandler[o]),a&&a()},Phaser.Plugin.Softkey.prototype._debug=function(e){if(game.custom&&game.custom.debug&&e.shiftKey)switch(e.key){case"ArrowLeft":return"SoftLeft";case"ArrowRight":return"SoftRight"}return e.key}}])}),Phaser.Plugin.Softkey=function(e,t){Phaser.Plugin.call(this,e,t)},Phaser.Plugin.Softkey.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Softkey.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Softkey.prototype.skGroup=null,Phaser.Plugin.Softkey.prototype.lastConfig={},Phaser.Plugin.Softkey.prototype.defaultHandler={},Phaser.Plugin.Softkey.prototype.listener=function(e){self=this,this.lastConfig.action=e,window.onkeydown=function(t){self._keyPress(t,e)}},Phaser.Plugin.Softkey.prototype.config=function(e){if(e.label)return e.style||(e.style={font:"16px Open Sans",fill:"#ffffff"}),this.skGroup&&this.skGroup.removeAll(),this.skGroup=game.add.group(),this.skGroup.fixedToCamera=!0,this.skGroup.cameraOffset.setTo(-game.camera.x,-game.camera.y),this.lastConfig.label=e.label,this.lastConfig.style=e.style,this.centerX=game.camera.x+game.camera.width/2,this.portionLenght=Math.round(.9*game.camera.width/3),void 0!==e.label.lsk&&(this.lsk=game.add.text(game.camera.x+10,game.camera.y+(game.camera.height-12),e.label.lsk.text,e.label.lsk.style?e.label.lsk.style:e.style),this.lsk.x=game.camera.x+10+this.lsk.width/2,this.lsk.anchor.setTo(.5),this.skGroup.add(this.lsk),this.portionLenght<this.lsk.width&&ellipsizeText(this.lsk,this.portionLenght,1)),void 0!==e.label.csk&&(this.csk=game.add.text(this.centerX,game.camera.y+(game.camera.height-12),e.label.csk.text,e.label.csk.style?e.label.csk.style:e.style),this.csk.anchor.setTo(.5),this.skGroup.add(this.csk),this.portionLenght<this.csk.width&&ellipsizeText(this.csk,this.portionLenght)),void 0!==e.label.rsk&&(this.rsk=game.add.text(190,game.camera.y+(game.camera.height-12),e.label.rsk.text,e.label.rsk.style?e.label.rsk.style:e.style),this.rsk.x=game.camera.x+(game.camera.width-10)-this.rsk.width/2,this.rsk.anchor.setTo(.5),this.skGroup.add(this.rsk),this.portionLenght<this.rsk.width&&ellipsizeText(this.rsk,this.portionLenght,3)),this.skGroup},Phaser.Plugin.Softkey.prototype.getLastConfig=function(){return this.lastConfig},Phaser.Plugin.Softkey.prototype._keyPress=function(e,t){var a=null,o=this._debug(e);switch(o){case"SoftLeft":t.softLeft&&(a=t.softLeft,e.preventDefault());break;case"Enter":t.enter&&(a=t.enter,e.preventDefault());break;case"MicrophoneToggle":e.preventDefault();break;case"SoftRight":t.softRight&&(a=t.softRight,e.preventDefault());break;case"Backspace":t.backspace&&(a=function(){e.preventDefault(),e.stopImmediatePropagation(),t.backspace()});break;case"EndCall":t.endCall&&(a=function(){e.preventDefault(),e.stopImmediatePropagation(),t.endCall()});break;default:t[o]&&(a=t[o])}a||(a=this.defaultHandler[o]),a&&a()},Phaser.Plugin.Softkey.prototype._debug=function(e){if(game.custom&&game.custom.debug&&e.shiftKey)switch(e.key){case"ArrowLeft":return"SoftLeft";case"ArrowRight":return"SoftRight"}return e.key};var maxScoreStorage="color-crumbs-max-score",actualScore="color-crumbs-actual-score",soundStorage="color-crumbs-sound",vibrationStorage="color-crumbs-vibration",delay=10,score={score:0,create:function(){this.softkey=this.game.plugins.add(Phaser.Plugin.Softkey);var e=game.add.graphics();e.beginFill(15329769,1),e.drawRect(0,0,240,320),this.scoreTitle(),this.renderText(),this.bind()},scoreTitle:function(){var e=game.add.text(10,-20,locale.getLocale("score").toUpperCase(),{font:"16px AvenirHeavy",fill:"#3f3f3f"});e.anchor.setTo(0,.5),e.fontWeight="bold";var t=game.add.sprite(e.x+e.width+5,-20,"score_title");t.anchor.setTo(0,.5),game.add.tween(t).to({y:55},600).start(),game.add.tween(e,t).to({y:55},600).start()},bind:function(){game.navigator.register({style:game.custom.fontStyleSKBlack,label:{lsk:{text:locale.getLocale("home")}},action:{softLeft:function(){game.state.start("menu")}}})},renderText:function(){var e=this,t=game.add.text(game.width/2,140,"0000",{font:"35px Avenir Black",fill:"#3f3f3f"});t.fontWeight="bold",t.anchor.setTo(.5);var a=localStorage.getItem(maxScoreStorage);this.animationScore(a,t,e)},animationScore:function(e,t,a){var o=1,i=1;if(e>0)var r=setInterval(function(){i=e-o<100?1:100,o+=i,t.setText(a.formatScore(o,4)),o>=e&&clearInterval(r)},delay)},formatScore:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},options={listenerUp:null,listenerDown:null,focus:null,focus2:null,soundOn:null,soundOff:null,vibrationOn:null,vibrationOff:null,index:0,softkey:null,vibrationText:null,soundText:null,locale:null,create:function(){var e=game.add.graphics();e.beginFill(15329769,1),e.drawRect(0,0,240,320),this.index=0,this.createTitleOption(),this.focus=game.add.tileSprite(25,138,190,40,"focus"),this.focus.visible=!0,this.focus2=game.add.tileSprite(25,178,190,40,"focus"),this.focus2.visible=!1,this.soundOn=game.add.tileSprite(178,151,28,15,"on"),this.soundOn.visible=!1,this.soundOff=game.add.tileSprite(178,151,28,15,"off"),this.soundOff.visible=!1,this.vibrationOn=game.add.tileSprite(178,191,28,15,"on"),this.vibrationOn.visible=!1,this.vibrationOff=game.add.tileSprite(178,191,28,15,"off"),this.vibrationOff.visible=!1,this.renderText(),this.bind(),this.loadSound(),this.loadVibration()},createTitleOption:function(){var e=game.add.text(10,-20,locale.getLocale("options").toUpperCase(),{font:"16px AvenirHeavy",fill:"#3f3f3f"});e.anchor.setTo(0,.5),e.fontWeight="bold";var t=game.add.sprite(e.x+e.width+5,-20,"score_title");t.anchor.setTo(0,.5),game.add.tween(t).to({y:55},600).start(),game.add.tween(e,t).to({y:55},600).start()},bind:function(){var e=this;game.navigator.register({style:game.custom.fontStyleSKBlack,label:{lsk:{text:locale.getLocale("home")},rsk:{text:locale.getLocale("about")}},action:{softLeft:function(){game.state.start("menu")},enter:function(){e.select()},softRight:function(){game.state.start("about")}}}),this.listenerUp=game.input.keyboard.addKey(Phaser.Keyboard.UP),this.listenerUp.onDown.add(this.up,this),this.listenerDown=game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.listenerDown.onDown.add(this.down,this)},renderText:function(){game.custom.fontStyle;this.soundText=game.add.text(40,148,locale.getLocale("sound"),game.custom.fontStyle),this.vibrationText=game.add.text(40,188,locale.getLocale("vibration"),game.custom.fontStyle),this.soundText.addColor("#fff",0),this.vibrationText.addColor("#000",0)},select:function(){switch(this.index){case 0:this.saveData(soundStorage,(!this.soundOn.visible).toString()),this.loadSound();break;case 1:this.saveData(vibrationStorage,(!this.vibrationOn.visible).toString()),this.loadVibration()}},up:function(){1===this.index&&(--this.index,this.focus.visible=!0,this.focus2.visible=!1,this.soundText.addColor("#fff",0),this.vibrationText.addColor("#000",0))},down:function(){this.index<1&&(++this.index,this.focus.visible=!1,this.focus2.visible=!0,this.vibrationText.addColor("#fff",0),this.soundText.addColor("#000",0))},saveData:function(e,t){localStorage.setItem(e,t)},loadData:function(e){var t=localStorage.getItem(e);return null===t||void 0===t?(this.saveData(e,"true"),"true"):t?t:void 0},loadSound:function(){var e=this.loadData(soundStorage);this.soundOn.visible="true"===e,this.soundOff.visible="false"===e},loadVibration:function(){var e=this.loadData(vibrationStorage);this.vibrationOn.visible="true"===e,this.vibrationOff.visible="false"===e}},about={create:function(){var e=game.add.graphics();e.beginFill(15329769,1),e.drawRect(0,0,240,320),this.createTitleAbout(),this.renderText(),this.bind()},createTitleAbout:function(){var e=game.add.text(10,-20,locale.getLocale("about").toUpperCase(),{font:"16px AvenirHeavy",fill:"#3f3f3f"});e.anchor.setTo(0,.5),e.fontWeight="bold";var t=game.add.sprite(e.x+e.width+5,-20,"score_title");t.anchor.setTo(0,.5),game.add.tween(t).to({y:55},600).start(),game.add.tween(e,t).to({y:55},600).start()},bind:function(){game.navigator.register({style:game.custom.fontStyleSKBlack,label:{lsk:{text:locale.getLocale("home")}},action:{softLeft:function(){game.state.start("menu")}}})},renderText:function(){var e=game.add.text(game.world.centerX,100,locale.getLocale("aboutText"),{font:"14px AvenirHeavy",fill:"#3f3f3f",align:"center"});e.anchor.set(.5),e.wordWrap=!0,e.wordWrapWidth=200,game.add.sprite(game.width/2,e.y+50,"kaios_logo").anchor.setTo(.5)}},fieldSize=5,orbColors=5,swapSpeed=200,fallSpeed=200,destroySpeed=300,fastFall=!0,gameArray=[],removeMap=[],orbGroup,cloneGroup,selectedOrb,canPick=!0,gameHeader=null,boardMarginTop=60,boardMarginLeft=10,selectorMarginTop=boardMarginTop+5,selectorMarginLeft=boardMarginLeft,playTime=60,bonusTimePrimaryMove=4,bonusTimeSecondaryMove=2,actualBonusTime=bonusTimePrimaryMove,timeLabel,scoreLabel,timer,scoreValue=0,pointPerOrb=1,bonusPointConstant=1,accumulatedBonusPoints=0,maxScore=0,canPlay=!0,plus1,plus3,shouldVibrate=!1,game_start={selectorPosition:[0,0],selectorPositionPrevious:[0,0],selector:null,moves:[],clusters:[],create:function(){playTime=60,this.selectorPosition=[0,0],scoreValue=0,selectedOrb=null,canPlay=!0,this.toggleSound(),this.toggleVibration(),game.add.tileSprite(0,0,240,320,"bg"),this.drawField(!0),this.drawHeader(),maxScore=localStorage.getItem(maxScoreStorage),canPick=!0,this.formatTimer(),this.bind(),timer=game.time.create(!1),timer.loop(Phaser.Timer.SECOND,this.updateCounter,this),timer.start()},toggleSound:function(){var e=this.loadData(soundStorage);e?game.bgSound.play("",0,.4,!0):game.bgSound.stop()},loadData:function(e){var t=localStorage.getItem(e);return null===t||void 0===t?(this.saveData(e,"true"),!0):JSON.parse(t)},saveData:function(e,t){localStorage.setItem(e,t)},saveGame:function(){localStorage.setItem(actualScore,scoreValue),this.maxScore=parseInt(localStorage.getItem(maxScoreStorage)),scoreValue>this.maxScore&&localStorage.setItem(maxScoreStorage,scoreValue)},toggleVibration:function(){shouldVibrate="true"===localStorage.getItem(vibrationStorage)},vibrate:function(){shouldVibrate&&navigator.vibrate(100)},updateCounter:function(){playTime--,playTime=Math.abs(playTime),this.formatTimer(),0==playTime&&(canPlay=!1,timer.stop(),Render.GameOver.show(scoreValue),this.saveGame())},formatTimer:function(){var e=Math.floor(playTime/60),t=playTime-60*e;t<10&&(t="0"+t),e<10&&(e="0"+e),timeLabel.setText(e+":"+t)},updateSoftkey:function(){var e=this;game.navigator.register({style:game.custom.fontStyleSKWhite,label:{lsk:{text:locale.getLocale("restart")},rsk:{text:locale.getLocale("options")},csk:null!==selectedOrb?locale.getLocale("deselect"):locale.getLocale("select")},action:{softLeft:function(){game.bgSound.stop(),game.ads.nextState="game",game.state.start("ads",!0,!1,"restart")},softRight:function(){game.bgSound.stop(),e.showOptions()},enter:function(){e.toggleSelect()},ArrowDown:function(){e.moveSelectorDown()},ArrowLeft:function(){e.moveSelectorLeft()},ArrowRight:function(){e.moveSelectorRight()},ArrowUp:function(){e.moveSelectorUp()},5:function(){e.toggleSelect()},2:function(){e.moveSelectorUp()},8:function(){e.moveSelectorDown()},4:function(){e.moveSelectorLeft()},6:function(){e.moveSelectorRight()},0:function(){Render.Options.show()}}}),game.navigator.group.children.forEach(function(e){e.setShadow(3,3,"rgba(0,0,0,0.3)",5)})},bind:function(){this.updateSoftkey()},showOptions:function(){Render.Options.show()},setSelectorPosition:function(){var e=this.selectorPosition[0]*orbSize+selectorMarginLeft,t=this.selectorPosition[1]*orbSize+selectorMarginTop,a=game.add.tween(this.selector).to({x:e,y:t},200);a.onComplete.add(function(){}),a.start()},moveSelectorToDiagonalLeftUp:function(){this.orbSelect(),this.moveSelectorUp(),this.moveSelectorLeft()},moveSelectorToDiagonalRightUp:function(){this.orbSelect(),this.moveSelectorUp(),this.moveSelectorRight()},moveSelectorToDiagonalRightDown:function(){this.orbSelect(),this.moveSelectorDown(),this.moveSelectorRight()},moveSelectorToDiagonalLeftDown:function(){this.orbSelect(),this.moveSelectorDown(),this.moveSelectorLeft()},moveSelectorDown:function(e){canPlay&&(this.selectorPositionPrevious=Object.assign([],this.selectorPosition),this.selectorPosition[1]<fieldSize-1&&this.selectorPosition[1]++,this.setSelectorPosition(),null!=selectedOrb&&this.orbSelect())},moveSelectorUp:function(e){canPlay&&(this.selectorPositionPrevious=Object.assign([],this.selectorPosition),this.selectorPosition[1]>0&&this.selectorPosition[1]--,this.setSelectorPosition(),null!==selectedOrb&&this.orbSelect())},moveSelectorLeft:function(e){this.selectorPositionPrevious=Object.assign([],this.selectorPosition),canPlay&&(this.selectorPosition[0]>0&&this.selectorPosition[0]--,this.setSelectorPosition(),null!=selectedOrb&&this.orbSelect())},moveSelectorRight:function(e){this.selectorPositionPrevious=Object.assign([],this.selectorPosition),canPlay&&(this.selectorPosition[0]<fieldSize-1&&this.selectorPosition[0]++,this.setSelectorPosition(),null!=selectedOrb&&this.orbSelect())},update:function(){},drawHeader:function(){gameHeader=game.add.group();var e=game.add.sprite(0,0,"header_bg");gameHeader.add(e);var t=game.add.text(10,10,locale.getLocale("time"),{font:"14px Avenir",fill:"#ffffff"});timeLabel=game.add.text(10,25,"00:00",{font:"18px Avenir",fill:"#ffffff"});var a=game.add.text(0,10,locale.getLocale("score"),{font:"14px Avenir",fill:"#ffffff"});a.x=game.width-a.width-10,scoreLabel=game.add.text(game.width-50,25,"0000",{font:"18px Avenir",fill:"#ffffff"}),gameHeader.add(t),gameHeader.add(a),gameHeader.add(timeLabel),gameHeader.add(scoreLabel),plus1=game.add.tileSprite(game.world.centerX,30,40,40,"plus1"),plus1.anchor.set(.5),plus1.alpha=0,plus3=game.add.tileSprite(game.world.centerX,30,40,40,"plus3"),plus3.alpha=0,plus3.anchor.set(.5)},drawField:function(e){e&&(game.add.tileSprite(0,boardMarginTop-1,240,240,"board_bg"),orbGroup=game.add.group(),cloneGroup=game.add.group(),this.selector=game.add.sprite(selectorMarginLeft,selectorMarginTop,"selector"));for(var t=0;t<fieldSize;t++){gameArray[t]=[];for(var a=0;a<fieldSize;a++){var o=game.add.sprite(orbSize*a+orbSize/2,orbSize*t+orbSize/2,"orbs");o.anchor.set(.5),orbGroup.add(o);do{var i=game.rnd.between(0,orbColors-1);o.frame=i,gameArray[t][a]={orbColor:i,orbSprite:o}}while(this.isMatch(t,a))}}selectedOrb&&this.orbSelect(),orbGroup.y=boardMarginTop+5,orbGroup.x=boardMarginLeft,cloneGroup.y=boardMarginTop+5,cloneGroup.x=boardMarginLeft,this.findMoves()},toggleSelect:function(){canPick?this.orbSelect():this.orbDeselect(),this.updateSoftkey()},orbSelect:function(){var e,t;if(accumulatedBonusPoints=0,actualBonusTime=bonusTimePrimaryMove,canPick){e=this.selectorPosition[1],t=this.selectorPosition[0];var a=this.gemAt(e,t);a!==-1&&(null===selectedOrb?(a.orbSprite.scale.setTo(1.2),a.orbSprite.bringToTop(),selectedOrb=a,game.input.addMoveCallback(this.orbMove,this)):this.areTheSame(a,selectedOrb)?(selectedOrb.orbSprite.scale.setTo(1),selectedOrb=null,this.updateSoftkey()):this.areNext(a,selectedOrb)?(selectedOrb.orbSprite.scale.setTo(1),this.swapOrbs(selectedOrb,a,!0,this)):(selectedOrb.orbSprite.scale.setTo(1),a.orbSprite.scale.setTo(1.2),selectedOrb=a,game.input.addMoveCallback(this.orbMove,this)))}},orbDeselect:function(e){game.input.deleteMoveCallback(this.orbMove,this)},orbMove:function(e,t,a){if(0==e.id&&null!=selectedOrb){var o=t-selectedOrb.orbSprite.x,i=a-selectedOrb.orbSprite.y,r=0,s=0;if(Math.abs(o)>orbSize/2?s=o>0?1:-1:Math.abs(i)>orbSize/2&&(r=i>0?1:-1),r+s!=0){var n=this.gemAt(this.getOrbRow(selectedOrb)+r,this.getOrbCol(selectedOrb)+s);n!=-1&&(selectedOrb.orbSprite.scale.setTo(1),this.swapOrbs(selectedOrb,n,!0),game.input.deleteMoveCallback(this.orbMove,this))}}},swapOrbs:function(e,t,a){canPick=!1;var o=e.orbColor,i=e.orbSprite,r=t.orbColor,s=t.orbSprite;gameArray[this.getOrbRow(e)][this.getOrbCol(e)].orbColor=r,gameArray[this.getOrbRow(e)][this.getOrbCol(e)].orbSprite=s,gameArray[this.getOrbRow(t)][this.getOrbCol(t)].orbColor=o,gameArray[this.getOrbRow(t)][this.getOrbCol(t)].orbSprite=i;var n=(game.add.tween(gameArray[this.getOrbRow(e)][this.getOrbCol(e)].orbSprite).to({x:this.getOrbCol(e)*orbSize+orbSize/2,y:this.getOrbRow(e)*orbSize+orbSize/2},swapSpeed,Phaser.Easing.Linear.None,!0),game.add.tween(gameArray[this.getOrbRow(t)][this.getOrbCol(t)].orbSprite).to({x:this.getOrbCol(t)*orbSize+orbSize/2,y:this.getOrbRow(t)*orbSize+orbSize/2},swapSpeed,Phaser.Easing.Linear.None,!0));n.onComplete.add(function(){!this.matchInBoard()&&a?(this.swapOrbs(e,t,!1),this.selectorPosition=Object.assign([],this.selectorPositionPrevious),this.setSelectorPosition()):this.matchInBoard()?this.handleMatches():(canPick=!0,selectedOrb=null,this.updateSoftkey())}.bind(this))},areNext:function(e,t){return Math.abs(this.getOrbRow(e)-this.getOrbRow(t))+Math.abs(this.getOrbCol(e)-this.getOrbCol(t))==1},areTheSame:function(e,t){return this.getOrbRow(e)==this.getOrbRow(t)&&this.getOrbCol(e)==this.getOrbCol(t)},gemAt:function(e,t){return e<0||e>=fieldSize||t<0||t>=fieldSize?-1:gameArray[e][t]},getOrbRow:function(e){return Math.floor(e.orbSprite.y/orbSize)},getOrbCol:function(e){return Math.floor(e.orbSprite.x/orbSize)},isHorizontalMatch:function(e,t){return this.gemAt(e,t).orbColor==this.gemAt(e,t-1).orbColor&&this.gemAt(e,t).orbColor==this.gemAt(e,t-2).orbColor},isVerticalMatch:function(e,t){return this.gemAt(e,t).orbColor==this.gemAt(e-1,t).orbColor&&this.gemAt(e,t).orbColor==this.gemAt(e-2,t).orbColor},isMatch:function(e,t){return this.isHorizontalMatch(e,t)||this.isVerticalMatch(e,t)},matchInBoard:function(){for(var e=0;e<fieldSize;e++)for(var t=0;t<fieldSize;t++)if(this.isMatch(e,t))return!0;return!1},handleMatches:function(){removeMap=[];for(var e=0;e<fieldSize;e++){removeMap[e]=[];for(var t=0;t<fieldSize;t++)removeMap[e].push(0)}this.handleHorizontalMatches(),this.handleVerticalMatches(),this.destroyOrbs()},handleVerticalMatches:function(){for(var e=0;e<fieldSize;e++)for(var t=1,a=-1,o=0,i=0;i<fieldSize;i++)if(this.gemAt(i,e).orbColor==a&&t++,this.gemAt(i,e).orbColor!=a||i==fieldSize-1){if(t>=3)for(var r=0;r<t;r++)removeMap[o+r][e]++;o=i,t=1,a=this.gemAt(i,e).orbColor}},handleHorizontalMatches:function(){for(var e=0;e<fieldSize;e++)for(var t=1,a=-1,o=0,i=0;i<fieldSize;i++)if(this.gemAt(e,i).orbColor==a&&t++,this.gemAt(e,i).orbColor!=a||i==fieldSize-1){if(t>=3)for(var r=0;r<t;r++)removeMap[e][o+r]++;o=i,t=1,a=this.gemAt(e,i).orbColor}},updateScore:function(e){var t=scoreValue=e+scoreValue;switch(t+="",t.length){case 1:t="0"+t;case 2:t="0"+t;case 3:t="0"+t}scoreLabel.setText(t)},updateTime:function(e){playTime+=e,this.animateBonusTime(e)},animateBonusTime:function(e){var t=e===bonusTimePrimaryMove?plus3:plus1,a=game.add.tween(t.scale).to({x:1.2,y:1.2},500),o=game.add.tween(t.scale).to({x:1,y:1},200),i=game.add.tween(t).to({alpha:1,scaleX:2,scaleY:2},500),r=game.add.tween(t).to({alpha:0,scaleX:1,scaleY:1},500);i.chain(r),i.start(),a.chain(o),a.start()},destroyOrbs:function(){for(var e=0,t=0;t<fieldSize;t++)for(var a=0;a<fieldSize;a++)if(removeMap[t][a]>0){var o=game.add.tween(gameArray[t][a].orbSprite).to({alpha:0},destroySpeed,Phaser.Easing.Linear.None,!0);e++,o.onComplete.add(function(t){t.destroy(),e--,0==e&&(this.vibrate(),this.makeOrbsFall(),fastFall&&this.replenishField())}.bind(this)),gameArray[t][a]=null}this.updateTime(actualBonusTime),actualBonusTime=bonusTimeSecondaryMove,this.updateScore(e+accumulatedBonusPoints*e),accumulatedBonusPoints+=bonusPointConstant},makeOrbsFall:function(){for(var e=0,t=!1,a=fieldSize-2;a>=0;a--)for(var o=0;o<fieldSize;o++)if(null!=gameArray[a][o]){var i=this.holesBelow(a,o);if(i>0){!fastFall&&i>1&&(i=1,t=!0);var r=game.add.tween(gameArray[a][o].orbSprite).to({y:gameArray[a][o].orbSprite.y+i*orbSize},fallSpeed,Phaser.Easing.Linear.None,!0);e++,r.onComplete.add(function(){e--,0==e&&(t?this.makeOrbsFall():fastFall||this.replenishField())}.bind(this)),gameArray[a+i][o]={orbSprite:gameArray[a][o].orbSprite,orbColor:gameArray[a][o].orbColor},gameArray[a][o]=null}}0==e&&this.replenishField()},replenishField:function(){for(var e=0,t=!1,a=0;a<fieldSize;a++){var o=this.holesInCol(a);if(o>0){!fastFall&&o>1&&(o=1,t=!0);for(var i=0;i<o;i++){var r=game.add.sprite(orbSize*a+orbSize/2,-(orbSize*(o-1-i)+orbSize/2),"orbs");r.anchor.set(.5),orbGroup.add(r);var s=game.rnd.between(0,orbColors-1);r.frame=s,gameArray[i][a]={orbColor:s,orbSprite:r};var n=game.add.tween(gameArray[i][a].orbSprite).to({y:orbSize*i+orbSize/2},fallSpeed,Phaser.Easing.Linear.None,!0);e++,n.onComplete.add(function(){e--,0==e&&(t?this.makeOrbsFall():this.matchInBoard()?game.time.events.add(250,this.handleMatches,this):(canPick=!0,selectedOrb=null,this.updateSoftkey()))}.bind(this))}}}this.findMoves()},showNoPlay:function(){var e=this;canPlay&&(this.updateSoftkey(),setTimeout(function(){if(canPick){canPlay=!1,timer.pause(),canPick=!1;var t=game.add.graphics();t.beginFill(15329769,.9),t.drawRect(0,59,240,230);var a=game.add.text(game.world.centerX,game.world.centerY,locale.getLocale("possibleMoves"),{font:"20px Heavitas",fill:"#000",align:"center"});a.wordWrap=!0,a.wordWrapWidth=160,a.setShadow(3,3,"rgba(0,0,0,0.5)",5),a.anchor.set(.5),a.setTextBounds(0,0,150,100);var o=game.add.tween(a).to({alpha:1},200,"Linear",!0).start();o.onComplete.add(function(){setTimeout(function(){a.destroy(),t.destroy(),e.recreateField(),canPlay=!0,selectedOrb&&e.orbSelect()},2500)})}},600))},holesBelow:function(e,t){for(var a=0,o=e+1;o<fieldSize;o++)null==gameArray[o][t]&&a++;return a},holesInCol:function(e){for(var t=0,a=0;a<fieldSize;a++)null==gameArray[a][e]&&t++;return t},swap:function(e,t,a,o){var i=gameArray[e][t].orbColor;gameArray[e][t].orbColor=gameArray[a][o].orbColor,gameArray[a][o].orbColor=i},findMoves:function(){this.moves=[];for(var e=0;e<fieldSize;e++)for(var t=0;t<fieldSize-1;t++)this.swap(t,e,t+1,e),this.findClusters(),this.swap(t,e,t+1,e),this.clusters.length>0&&this.moves.push({column1:t,row1:e,column2:t+1,row2:e});for(var t=0;t<fieldSize;t++)for(var e=0;e<fieldSize-1;e++)this.swap(t,e,t,e+1),this.findClusters(),this.swap(t,e,t,e+1),this.clusters.length>0&&this.moves.push({column1:t,row1:e,column2:t,row2:e+1});0===this.moves.length&&this.showNoPlay(),this.clusters=[]},findClusters:function(){this.clusters=[];for(var e=0;e<fieldSize;e++)for(var t=1,a=0;a<fieldSize;a++){var o=!1;a==fieldSize-1?o=!0:gameArray[a][e].orbColor==gameArray[a+1][e].orbColor&&gameArray[a][e].orbColor!=-1?t+=1:o=!0,o&&(t>=3&&this.clusters.push({column:a+1-t,row:e,length:t,horizontal:!0}),t=1)}for(var a=0;a<fieldSize;a++)for(var t=1,e=0;e<fieldSize;e++){var o=!1;e==fieldSize-1?o=!0:gameArray[a][e].orbColor==gameArray[a][e+1].orbColor&&gameArray[a][e].orbColor!=-1?t+=1:o=!0,o&&(t>=3&&this.clusters.push({column:a,row:e+1-t,length:t,horizontal:!1}),t=1)}},recreateField:function(){canPlay=!1;var e=this.getRandomInt(0,fieldSize-1),t=this.getRandomInt(0,fieldSize-1),a=this.gemAt(e,t).orbSprite;cloneGroup.add(a);var o=game.add.tween(a.scale).to({x:42,y:42},500),i=this;game.add.tween(this.selector).to({alpha:0},200).start(),o.onComplete.add(function(){var e=game.add.text(game.world.centerX,167,locale.getLocale("reshufflig"),{font:"20px Heavitas",fill:"#fff"});e.anchor.set(.5),e.alpha=.1;var t=(game.add.tween(e).to({alpha:1},200,"Linear",!0).start(),game.add.tween(a.scale).to({x:0,y:0},400));setTimeout(function(){orbGroup.removeAll(!0),i.drawField(!1),t.start();var a=game.add.tween(e).to({alpha:0},300,"Linear",!0).start();t.onComplete.add(function(){a.onComplete.add(function(){e.destroy()}),cloneGroup.removeAll(!0),game.add.tween(i.selector).to({alpha:1},200).start(),canPlay=!0,canPick=!0,timer.resume()})},1e3)}),o.start()},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},menu={create:function(){game.add.tileSprite(0,0,240,320,"bg_menu"),game.add.tileSprite(18,35,202,103,"logo"),game.add.tileSprite(48,190,140,42,"btn_play"),this.renderText(),this.bind()},bind:function(){game.navigator.register({style:game.custom.fontStyleSKWhite,label:{lsk:{text:locale.getLocale("score")},rsk:{text:locale.getLocale("options")}},action:{softLeft:function(){game.state.start("score")},enter:function(){game.state.start("game")},softRight:function(){game.state.start("options")}}})},renderText:function(){var e=this.game.add.text(this.game.world.centerX,.67*game.height,locale.getLocale("play").toUpperCase(),{font:"13px AvenirHeavy",fill:"#ffffff"});e.anchor.setTo(.5),e.fontWeight="bold"}},orbSize=44,splash={locale:null,preload:function(){game.load.image("splash_logo","assets/kaios-logo.png");for(var e=document.querySelectorAll(".fontPreload"),t=0;t<e.length;t++)e[t].remove();game.navigator=game.plugins.add(Phaser.Plugin.Navigator)},create:function(){var e=game.add.sprite(game.world.centerX,140,"splash_logo");e.anchor.set(.5),this.loadData(soundStorage),this.loadData(vibrationStorage);var t=game.add.text(game.world.centerX,game.world.centerY+20,locale.getLocale("presents"),{font:"20px Bebas Neue",fill:"#fff"});t.anchor.set(.5),document.addEventListener("visibilitychange",function(e){document.hidden?(game.sound.mute=!0,"game"!==game.state.current||Render.Options.isPaused||Render.GameOver.isLose||Render.Options.show()):Render.Options.isPaused||Render.Confirm.isOpen?game.sound.mute=!0:game.sound.mute=!1}),game.load.onLoadComplete.add(function(){this.decode(game,this,function(){game.init=!0,game.bgSound.volume=.4,game.ads.nextState="menu",game.state.start("ads",!0,!1,"splash")})},this),this.start()},decode:function(e,t,a){var o=[];e.bgSound=e.add.audio("bg_sound"),o=[e.bgSound],e.sound.setDecodedCallback(o,function(){a()},t)},loadSounds:function(){game.load.audio("bg_sound",["assets/sounds/zazie.mp3"])},start:function(){game.load.image("bg_menu","assets/home-background.png"),game.load.image("btn_play","assets/btn-play.png"),game.load.image("logo","assets/logo-color.png"),game.load.image("bg-dialog","assets/dialog.png"),game.load.spritesheet("orbs","assets/sprites/tile-colorful.png",orbSize,orbSize),game.load.spritesheet("selector","assets/sprites/focus-select.png",orbSize,orbSize),game.load.image("board_bg","assets/game-board.png"),game.load.image("header_bg","assets/header_footer_bg.png"),game.load.image("no_play_bg","assets/bg_50.png"),game.load.spritesheet("plus1","assets/sprites/bonus-time_1.png",40,40),game.load.spritesheet("plus3","assets/sprites/bonus-time_3.png",40,40),game.load.image("focus","assets/focus-options.png"),game.load.image("on","assets/selector-on.png"),game.load.image("off","assets/selector-off.png"),game.load.image("gameover_title","assets/label-game_over.png"),game.load.image("new_max_record","assets/new-record.png"),game.load.image("score_title","assets/label-dots.png"),game.load.image("kaios_logo","assets/logo-kaios.png"),this.loadSounds(),game.load.start()},loadData:function(e){var t=localStorage.getItem(e);return null===t||void 0===t?(this.saveData(e,"true"),"true"):t},saveData:function(e,t){localStorage.setItem(e,t)}},ads={init:function(e){this.adname=e},create:function(){game.sound.mute=!0;var e=function(){game.sound.mute=!1,window.focus(),game.state.start(game.ads.nextState)};game.ads.showAds({adname:this.adname,onAdFinished:e}),this.bind()},bind:function(){game.navigator&&game.navigator.register({style:game.custom.fontStyleSKWhite,label:{},action:{softLeft:function(){},enter:function(){},softRight:function(){},backspace:function(){},endCall:function(){}}})}};JioKaiAds.prototype.showAds=function(e){const t=document.createElement("iframe");
t.setAttribute("id","iframe-ads"),t.setAttribute("style","border: none;"),document.getElementById(this.adsWrapperId).appendChild(t);const a=KaiDisplayAdsSdk("iframe-ads");a.init({banner:{w:window.screen.width,h:window.screen.height-26,topmargin:26,adspotkey:"0fed88cc",pkgname:"com.kaiostech.gems",adrefresh:0,customData:"",advid:window.advid,uid:window.uid},listeners:{adclose:function(){e.onAdFinished()}}})};var game=new Phaser.Game(240,320,Phaser.AUTO,"phaser-game"),Render={};game.custom=Object.freeze({fontStyle:Object.freeze({font:"AvenirHeavy",fontFamily:"Avenir",fontSize:"16px",fill:"#FFFFFF"}),fontStyleSKWhite:Object.freeze({font:"AvenirHeavy",fontFamily:"Avenir",fontSize:"16px",fill:"#FFFFFF"}),fontStyleSKBlack:Object.freeze({font:"AvenirHeavy",fontFamily:"Avenir",fontSize:"16px",fill:"#000000"})});var maxScore=localStorage.getItem(maxScoreStorage);maxScore||localStorage.setItem(maxScoreStorage,0);var sound=localStorage.getItem(soundStorage);soundStorage||localStorage.setItem(soundStorage,"true");var vibration=localStorage.getItem(vibrationStorage);vibrationStorage||localStorage.setItem(vibrationStorage,"true"),game.ads=new JioKaiAds("adsWrapper"),game.state.add("ads",ads),game.state.add("splash",splash),game.state.add("menu",menu),game.state.add("game",game_start),game.state.add("about",about),game.state.add("options",options),game.state.add("score",score),game.init=!1,navigator.mozL10n.ready(function(){Render.Options.isPaused&&Render.Options.hide(),Render.Confirm.isOpen&&Render.Confirm.hide(),Render.GameOver.isLose&&Render.GameOver.hide(),game.paused=!1,game.init?(game.bgSound.stop(),game.state.start("menu")):game.state.start("splash")}),document.addEventListener("keydown",function(e){"ArrowDown"===e.key&&e.preventDefault()}),document.addEventListener("keydown",function(e){"ArrowUp"===e.key&&e.preventDefault()}),Render.Confirm={isOpen:!1,show:function(e){this.isOpen=!0,"game"!==game.state.current||Render.Options.isPaused||(game.paused=!0),this.confirmGroup=game.add.group();var t=game.add.graphics();t.beginFill(1704233,.9),t.drawRect(0,0,240,320),game.navigator.register({style:game.custom.fontStyleSKWhite,label:{lsk:{text:locale.getLocale("cancel")},rsk:{text:locale.getLocale("quit")}},action:{softLeft:function(){game_start.toggleSound(),Render.Confirm.hide()},softRight:function(){},backspace:function(){game_start.toggleSound(),Render.Confirm.hide()}}});var a=game.add.image(game.world.centerX,game.world.centerY-50,"logo");a.anchor.setTo(.5);var o=game.add.image(game.world.centerX,game.height-80,"bg-dialog");o.anchor.setTo(.5);var i=game.add.text(o.x,o.y,locale.getLocale("confirmText"),{fontSize:16,align:"center",fill:"#0a0a0a"});i.anchor.setTo(.5),i.wordWrap=!0,i.wordWrapWidth=200,this.confirmGroup.addMultiple([t,a,o,i])},hide:function(){"game"!==game.state.current||Render.Options.isPaused||(game.paused=!1),this.isOpen=!1,this.confirmGroup.removeAll(),game.navigator.setLastConfig()}},Render.Options={isPaused:!1,show:function(){this.isPaused=!0,game.paused=!0,game_start.canMove=!1,this.optionsGroup=game.add.group();var e=game.add.graphics();e.beginFill(16766976,.9),e.drawRect(0,0,240,320),game.navigator.register({style:game.custom.fontStyleSKBlack,label:{lsk:{text:locale.getLocale("home")},rsk:{text:locale.getLocale("resume")}},action:{softLeft:function(){game.bgSound.stop(),Render.Options.hide(),game.state.start("menu")},enter:function(){Render.Options.selectOpValue()},softRight:function(){game_start.toggleSound(),Render.Options.hide()},ArrowUp:function(){1===Render.Options.index&&(--Render.Options.index,Render.Options.focus.visible=!0,Render.Options.focus2.visible=!1)},ArrowDown:function(){Render.Options.index<1&&(++Render.Options.index,Render.Options.focus.visible=!1,Render.Options.focus2.visible=!0)},0:function(){game_start.toggleSound(),Render.Options.hide()}}}),this.focus=game.add.sprite(game.world.centerX,190,"focus"),this.focus.anchor.setTo(.5),this.focus.visible=!0,this.focus2=game.add.sprite(game.world.centerX,228,"focus"),this.focus2.anchor.setTo(.5),this.focus2.visible=!1,this.soundOn=game.add.tileSprite(180,183,28,15,"on"),this.soundOn.visible=!1,this.soundOff=game.add.tileSprite(180,183,28,15,"off"),this.soundOff.visible=!1,this.vibrationOn=game.add.tileSprite(180,223,28,15,"on"),this.vibrationOn.visible=!1,this.vibrationOff=game.add.tileSprite(180,223,28,15,"off"),this.vibrationOff.visible=!1,this.index=0,this.loadSound(),this.loadVibration();var t=Object.assign({},game.custom.fontStyle);t.fontSize="24px";var a=game.add.text(43,180,locale.getLocale("sound"),game.custom.fontStyle);a.setShadow(3,3,"rgba(0,0,0,0.3)",5);var o=game.add.text(43,220,locale.getLocale("vibration"),game.custom.fontStyle);o.setShadow(3,3,"rgba(0,0,0,0.3)",5);var i=game.add.text(10,100,locale.getLocale("options").toUpperCase(),{font:"18px AvenirHeavy",fill:"#3f3f3f"});i.anchor.setTo(0,.5),i.fontWeight="bold";var r=game.add.sprite(i.x+i.width+5,100,"score_title");r.anchor.setTo(0,.5),this.optionsGroup.addMultiple([e,this.focus,i,r,this.focus2,a,o,this.vibrationOn,this.vibrationOff,this.soundOff,this.soundOn])},hide:function(){this.isPaused=!1,game.sound.mute=!1,game.paused=!1,game_start.canMove=!0,this.optionsGroup.removeAll(),game.navigator.setLastConfig()},selectOpValue:function(){switch(this.index){case 0:this.saveData(soundStorage,!this.soundOn.visible),this.loadSound();break;case 1:this.saveData(vibrationStorage,!this.vibrationOn.visible),this.loadVibration()}},saveData:function(e,t){localStorage.setItem(e,t)},loadData:function(e){var t=JSON.parse(localStorage.getItem(e));return null===t||void 0===t?(this.saveData(e,"true"),"true"):t},loadSound:function(){var e=this.loadData(soundStorage);game_start.toggleSound(),this.soundOn.visible=e,this.soundOff.visible=!e},loadVibration:function(){var e=this.loadData(vibrationStorage);game_start.toggleVibration(),this.vibrationOn.visible=e,this.vibrationOff.visible=!e}},Render.GameOver={isLose:!1,show:function(e){this.isLose=!0;var t=game.add.graphics();t.beginFill(16390425,.9),t.drawRect(0,0,240,320),game.navigator.register({style:game.custom.fontStyleSKWhite,label:{lsk:{text:locale.getLocale("home")},rsk:{text:locale.getLocale("restart")}},action:{softLeft:function(){game.bgSound.stop(),Render.GameOver.hide(),game.ads.nextState="menu",game.state.start("ads",!0,!1,"goHome")},softRight:function(){game.bgSound.stop(),Render.GameOver.hide(),game.ads.nextState="game",game.state.start("ads",!0,!1,"playAgain")}}});var a=game.add.text(self.game.width/2,20,locale.getLocale("gameOver"),{font:"26px Heavitas",fill:"#fff",align:"center"});a.wordWrap=!0,a.lineSpacing=-8,a.anchor.setTo(.5,.5),a.wordWrapWidth=210;var o=game.add.sprite(120,270,"new_max_record");o.anchor.setTo(.5),o.scale.x=0,o.scale.y=0,o.alpha=0;var i=game.add.text(120,274,locale.getLocale("newRecord").toUpperCase(),{font:"12px Avenir",fill:"#ff0000"});i.anchor.setTo(.5),i.alpha=0,i.scale.x=0,i.scale.y=0,i.fontWeight="bold",game.add.tween(a).to({y:70},600).start(),this.actualScore=e,this.maxScore=parseInt(localStorage.getItem(maxScoreStorage)),this.actualScore>this.maxScore&&(localStorage.setItem(maxScoreStorage,e),game.add.tween(o).to({alpha:1}).start(),game.add.tween(o.scale).to({x:1,y:1}).start(),game.add.tween(i).to({alpha:1}).start(),game.add.tween(i.scale).to({x:1,y:1}).start());var r=game.add.text(120,160,locale.getLocale("score"),{font:"16px AvenirHeavy",fill:"#ffffff",align:"right"});r.anchor.setTo(.5);var s=game.add.text(120,r.y+35,"0000",{font:"40px AvenirHeavy",fill:"#ffffff",align:"right"});s.fontWeight="bold",s.anchor.setTo(.5);var n=this.actualScore,l=0,c=50,d=parseInt(.9*n),g=1;if(n>0){n>100&&(c=10,d=parseInt(.95*n),g=3);var h=setInterval(function(){l+=g,s.setText(this.formatScore(l,4)),l>=d&&(c=130,clearInterval(h),h=setInterval(function(){s.setText(this.formatScore(l++,4)),l>n&&clearInterval(h)}.bind(this),c))}.bind(this),c)}},hide:function(){this.isLose=!1,game.navigator.setLastConfig()},formatScore:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}};